<!--
Copyright 2020, Verizon Media
Licensed under the terms of the MIT license. See the LICENSE file in the project root for license terms.
-->

<template>
    <require from="./c-form-virtual-select.css"></require>

    <style>
    .virtual-select {
      width: 100px;
      height: 200px;
      overflow: scroll;
      overflow-x: hidden;
      border: 1px solid black;
      list-style-type: none;
      padding: 0;
      cursor: default;
    }
  </style>

    <div
        class="${styles.labelWrapper}"
        show.bind="_state !== 'hidden' && label"
    >
        <c-label
            state="${_state}"
            for="${id}"
        >
            ${label}
        </c-label>
        <slot name="tip"></slot>
    </div>
    <l-stack
        spacing="var(--s-3)"
        class="${styles.search}"
        if.bind="_state !== 'disabled' && !enableSelect2"
    >
        <l-cluster
            spacing="var(--s-3)"
            if.bind="reorder"
        >
            <div>
                <c-button
                    size="small"
                    color="neutral"
                    icon-only.bind="true"
                    icon-align="-0.15em"
                    icon="chevron-up"
                    icon-size="1em"
                    click.trigger="moveItems(-1)"
                    state="${selectValue.length ? '': 'disabled'}"
                ></c-button>
                <c-button
                    size="small"
                    color="neutral"
                    icon-only.bind="true"
                    icon-align="-0.15em"
                    icon="chevron-down"
                    icon-size="1em"
                    click.trigger="moveItems(1)"
                    state="${selectValue.length ? '': 'disabled'}"
                ></c-button>
            </div>
        </l-cluster>
    </l-stack>
    <ul 
        class="
            virtual-select
            ${styles.select}
            ${styles[_state]}
        "
        id="${id}"
        if.bind="!isLoading && _state !== 'hidden'"
    >
        <li
            virtual-repeat.for="option of optionsData"
            value.bind="option.value"
            click.trigger="select($event, option, $index)"
            style.bind="option.selected ? 'background-color: gray' : ''"
        >
            ${option.text}
        </li>
    </ul>
    <!--select
        class="
            ${styles.select}
            ${styles[_state]}
        "
        id="${id}"
        value.bind="selectValue"
        if.bind="!isLoading && _state !== 'hidden' && enableSelect2"
        multiple.bind="multiple"
    >
        <option
            repeat.for="option of options"
            value="${option.value}"
            if.bind="!simple"
        >
            ${option.text}
        </option>
        <option
            repeat.for="option of options"
            value="${option}"
            if.bind="simple"
        >
            ${option}
        </option>
    </select-->
    <div
        class="
            ${isLoading ? styles.loader : ''}
            ${isLoadingMore ? styles.loadingMore : ''}
        "
        if.bind="(isLoading || isLoadingMore) && multiple"
    >
        <c-spinner size="small"></c-spinner>
    </div>
    <c-disabled if.bind="_state === 'disabled'">
        ${disableDisplay || 'None'}
    </c-disabled>
    <c-form-error
        state="${_state}"
        if.bind="_state !== 'hidden' && errorMsg"
    >
        ${errorMsg}
    </c-form-error>
    <c-form-warning
        state="${_state}"
        if.bind="_state !== 'hidden' && warningMsg"
    >
        ${warningMsg}
    </c-form-warning>
</template>
