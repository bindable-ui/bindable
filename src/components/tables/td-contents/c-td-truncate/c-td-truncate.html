<!--
Copyright 2021, Yahoo EdgeCast
Licensed under the terms of the MIT license. See the LICENSE file in the project root for license terms.
-->

<template>
	<require from="./c-td-truncate.css"></require>

	<c-tip
        if.bind="row[col.colHeadName + 'Tip']"
        side="${row[col.colHeadName + 'TipSide']}"
        arrow-position="${row[col.colHeadName + 'TipArrowPosition']}"
        size="${row[col.colHeadName + 'TipSize']}"
        fill-width-trigger.bind="true"
        force-close.bind="true"
        content-max-height="${row[col.colHeadName + 'ContentMaxHeight']}"
    >
		<div slot="trigger" >
			<div class="${styles.container}">
				<div class="${styles.truncate}">
	                <span if.bind="!searchHighlight">${value}</span>
	                <span if.bind="searchHighlight" innerhtml.bind="searchHighlight"></span>
		        </div>
			</div>
		</div>
		<div slot="content">
			<compose
                if.bind="row[col.colHeadName + 'TipViewModel']"
                view-model.bind="row[col.colHeadName + 'TipViewModel']"
                model.bind="{row:row, col:col}"
            ></compose>
			<c-p else>${value}</c-p>
		</div>
	</c-tip>

    <div else class="${styles.container}">
        <l-icon
            align="${row[col.colHeadName + 'IconAlign']}"
            icon="${row[col.colHeadName + 'Icon']}"
            size="${row[col.colHeadName + 'IconSize']}"
            spacing="${row[col.colHeadName + 'IconSpacing']}"
            color="${row[col.colHeadName + 'IconColor']}"
            if.bind="row[col.colHeadName + 'Icon']"
        ></l-icon>
        <c-pill
            color.bind="row[col.colHeadName + 'PillColor']"
            if.bind="row[col.colHeadName + 'Pill'] && !row[col.colHeadName + 'PillRight']"
        >
            <span slot="pill-content">${row[col.colHeadName + 'Pill']}</span>
        </c-pill>
        <div class="${styles.truncate}">
            <span title="${value}">
                <span if.bind="!searchHighlight">${value}</span>
                <span
                    if.bind="searchHighlight"
                    innerhtml.bind="searchHighlight"
                ></span>
            </span>
        </div>
        <c-pill
            color.bind="row[col.colHeadName + 'PillColor']"
            if.bind="row[col.colHeadName + 'Pill'] && row[col.colHeadName + 'PillRight']"
        >
            <span slot="pill-content">${row[col.colHeadName + 'Pill']}</span>
        </c-pill>
    </div>
</template>
