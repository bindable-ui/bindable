<!--
Copyright 2021, Yahoo
Licensed under the terms of the MIT license. See the LICENSE file in the project root for license terms.
-->

<template>
    <require from="./c-popover.css"></require>

    <div
        class="${styles.overlay}"
        if.bind="vPopoverService.model"
    >
        <div
            class="${styles.closeTrigger}"
            click.trigger="vPopoverService.close()"
        ></div>
        <div
            class="
                ${styles.popover}
                ${vPopoverService.showing ? styles.showing : ''}
            "
            css="
                margin-left: ${vPopoverService.model.left}px;
            "
        >
            <div
                class="${vPopoverService.model.top > 0 ? '' : styles.containerTop}"
                css="
                    margin-top: ${vPopoverService.model.top ? vPopoverService.model.top + 'px' : ''};
                "
            >
                <div
                    class="
                        ${tipStyles.tip}
                        ${styles.container}
                    "
                    id="popover-container"
                >
                    <div class="${styles.containerInner}">
                        <compose
                            view-model.bind="vPopoverService.model.contentViewModel"
                            model.bind="{data: vPopoverService.model.data}"
                            if.bind="vPopoverService.model.contentViewModel && vPopoverService.model.data"
                        ></compose>
                        <p else>Empty</p>
                    </div>
                    <span
                        class="${tipStyles.close}  ${styles.close}"
                        click.trigger="vPopoverService.close()"
                    >
                        Ã—
                    </span>
                    <span
                        class="${tipStyles.color}"
                        css="--tip-bar-color: ${vPopoverService.color};"
                    ></span>
                </div>
            </div>
        </div>
    </div>
</template>
